<launch>
    <!-- LiDAR Driver -->
    <group ns="sensor">
        <group ns="lidar">
            <include file="$(find velodyne_pointcloud)/launch/VLP-32C_points.launch">
            </include>
        </group>
    </group>
    <!-- Camera Driver -->
    <!-- <node pkg="uvc_camera" name="camera" type="uvc_camera_node" output="screen">
        <param name="device" type="string" value="/dev/video2"/>
        <param name="width" type="int" value="640"/>
        <param name="height" type="int" value="480"/>
        <param name="pixel_format" value="mjpeg"/>
        <param name="io_method" value="mmap"/>
        <param name="frame_id" value="front_camera/camera_optical_frame"/>
        <param name="camera_info_url" type="string" value="file://$(find sensor_launch)/data/camera.yaml"/>
    </node> -->

    <group ns="sensing">
        <group ns="preprocess">
            <!-- PointCloud Preprocessor -->
            <include file="$(find pointcloud_preprocessor)/launch/preprocessor.launch">
                <arg name="input_points_raw0" default="/sensor/lidar/main/pointcloud" />
                <arg name="input_points_raw1" default="" />
                <arg name="input_points_raw2" default="" />
                <arg name="input_points_raw3" default="" />
                <arg name="input_points_raw4" default="" />
                <arg name="input_points_raw5" default="" />
                <arg name="input_points_raw6" default="" />
                <arg name="input_points_raw7" default="" />
                <arg name="input_points_number" default="1" />
                <arg name="output_points_raw" default="lidar/self_cropped" />
            </include>
            <!-- PointCloud Ground Filter -->
            <node pkg="pointcloud_preprocessor" type="ray_ground_filter_node" name="ray_ground_filter" output="screen">
                <remap from="~input" to="lidar/self_cropped/pointcloud" />
                <remap from="~output" to="lidar/no_ground/pointcloud_raw" />
                <rosparam>
                    voxel_size_x: 0.3
                    voxel_size_y: 0.3
                    voxel_size_z: 0.5
                    voxel_points_threshold: 2
                </rosparam>
            </node>
            <!-- PointCloud Outlier Filter -->
            <node pkg="pointcloud_preprocessor" type="voxel_grid_outlier_filter_node" name="voxel_grid_outlier_filter" output="screen">
                <remap from="~input" to="lidar/no_ground/pointcloud_raw" />
                <remap from="~output" to="lidar/no_ground/pointcloud" />
                <rosparam>
                    voxel_size_x: 0.3
                    voxel_size_y: 0.3
                    voxel_size_z: 0.5
                    voxel_points_threshold: 2
                </rosparam>
            </node>
        </group>
    </group>
</launch>